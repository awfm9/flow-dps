# Extract Block Headers

## Description

The Extract Block Headers utility binary can be used to extract a randomized set of block headers from a protocol state.
Upon start, it will extract random headers from the protocol state within the provided height range from the database.
The headers will be written to one file each, until the configured total size is reached.

This is useful for the creation of dictionaries that can be used with Zstandard compression.
The default size for a Zstandard dictionary is set to 112,640 bytes, or ~112 kilobytes.
The training command expects a set of compressible payloads as an input, with one payload per file, as generated by this tool.
It is recommended to use at least ten times the size of the dictionary for total input size.
Ideally, a hundred times the size of the dictionary is best, which is what we use as default here.

## Usage

```sh
Usage of extract-block-headers:
  -b, --begin uint      lowest block height to include in extraction
  -d, --data string     directory for protocol state database (default "data")
  -f, --finish uint     highest block height to include in extraction (default 100000000)
  -l, --log string      log level for JSON logger output (default "info")
  -o, --output string   directory for output of block headers (default "headers")
  -s, --size uint       limit for total size of output files (default 11264000)
```

## Example

The following command will extract random block headers between height 1,200,000 and 1,500,000 from the protocol state.
It will write them to one file each in the `headers` directory until the total size has reached ~112 kilobytes.

```sh
./extract-block-headers -l debug -d /var/flow/data/protocol -b 1200000 -f 1500000 -o ./headers
```